(function(){var e={1:function(e,t,n){"use strict";function r(e,t,n,r,o,i,a,s){var u,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),a?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=u):o&&(u=s?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),u)if(c.functional){c._injectStyles=u;var f=c.render;c.render=function(e,t){return u.call(t),f(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,u):[u]}return{exports:e,options:c}}n.d(t,{Z:function(){return r}})},434:function(){(function(e,t){var n=t.documentElement,r=e.devicePixelRatio||1;function o(){t.body?t.body.style.fontSize=12*r+"px":t.addEventListener("DOMContentLoaded",o)}function i(){var e=n.clientWidth/10;n.style.fontSize=e+"px"}if(o(),i(),e.addEventListener("resize",i),e.addEventListener("pageshow",(function(e){e.persisted&&i()})),r>=2){var a=t.createElement("body"),s=t.createElement("div");s.style.border=".5px solid transparent",a.appendChild(s),n.appendChild(a),1===s.offsetHeight&&n.classList.add("hairlines"),n.removeChild(a)}})(window,document)},805:function(e,t,n){!function(t,r){e.exports=r(n(219))}(0,(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,t){return"W"===t?e+"周":e+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(e,t){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1100?"上午":n<1300?"中午":n<1800?"下午":"晚上"}};return n.default.locale(r,null,!0),r}))},893:function(e){!function(t,n){e.exports=n()}(0,(function(){"use strict";return function(e,t,n){e=e||{};var r=t.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(e,t,n,o){return r.fromToBase(e,t,n,o)}n.en.relativeTime=o,r.fromToBase=function(t,r,i,a,s){for(var u,c,f,d=i.$locale().relativeTime||o,l=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=l.length,h=0;h<p;h+=1){var m=l[h];m.d&&(u=a?n(t).diff(i,m.d,!0):i.diff(t,m.d,!0));var v=(e.rounding||Math.round)(Math.abs(u));if(f=u>0,v<=m.r||!m.r){v<=1&&h>0&&(m=l[h-1]);var _=d[m.l];s&&(v=s(""+v)),c="string"==typeof _?_.replace("%d",v):_(v,r,m.l,f);break}}if(r)return c;var g=f?d.future:d.past;return"function"==typeof g?g(c):g.replace("%s",c)},r.to=function(e,t){return i(e,t,this,!0)},r.from=function(e,t){return i(e,t,this)};var a=function(e){return e.$u?n.utc():n()};r.toNow=function(e){return this.to(a(this),e)},r.fromNow=function(e){return this.from(a(this),e)}}}))},212:function(e,t,n){"use strict";n.d(t,{TY:function(){return a},UO:function(){return o},Zf:function(){return i},fo:function(){return u},r0:function(){return s}});var r=n(361);const o=e=>r.Z.post("/v1_0/authorizations",e),i=()=>r.Z.get("/v1_0/user"),a=()=>r.Z.get("/v1_0/user/profile"),s=e=>r.Z.patch("/v1_0/user/profile",e),u=e=>r.Z.patch("/v1_0/user/photo",e)},416:function(e,t,n){"use strict";var r=n(311),o=n.n(r),i=function(){var e=this,t=e._self._c;return t("div",[t("keep-alive",[t("router-view")],1)],1)},a=[],s={name:"App"},u=s,c=n(1),f=(0,c.Z)(u,i,a,!1,null,"05fc0046",null),d=f.exports,l=n(686),p=n(239),h=n(871),m=n.n(h),v=(n(434),n(219)),_=n.n(v),g=n(893),y=n.n(g),b=n(805),S=n.n(b);_().extend(y()),_().locale(S()),o().config.productionTip=!1,o().filter("dateFormat",(e=>_()().to(e))),o().use(m()),o().use(h.Lazyload),new(o())({router:l.Z,store:p.Z,render:e=>e(d)}).$mount("#app")},686:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var r=n(311),o=n.n(r),i=VueRouter,a=n.n(i),s=n(239);const u=()=>n.e(161).then(n.bind(n,161)),c=()=>n.e(991).then(n.bind(n,991)),f=()=>n.e(893).then(n.bind(n,530)),d=()=>n.e(419).then(n.bind(n,419)),l=()=>n.e(245).then(n.bind(n,245)),p=()=>n.e(380).then(n.bind(n,380)),h=()=>n.e(198).then(n.bind(n,198)),m=()=>n.e(308).then(n.bind(n,308)),v=()=>n.e(268).then(n.bind(n,268));o().use(a());const _=[{path:"/login",component:u,name:"login"},{path:"/",component:c,children:[{path:"",component:f,name:"home",meta:{isRecord:!0,top:0}},{path:"/user",component:d,name:"user"}]},{path:"/search",component:l,name:"search"},{path:"/search/:kw",component:p,name:"search-result",props:!0,meta:{isRecord:!0,top:0}},{path:"/article/:id",component:h,name:"art-detail",props:!0,meta:{isRecord:!0,top:0}},{path:"/user/edit",component:m,name:"user-edit"},{path:"/chat",component:v,name:"chat"}],g=new(a())({routes:_}),y=["/user","/user/edit"];g.beforeEach(((e,t,n)=>{if(-1!==y.indexOf(e.path)){const t=s.Z.state.tokenInfo.token;t?n():(n("/login"),n(`/login?pre=${e.fullPath}`))}else n()}));const b=a().prototype.push;a().prototype.push=function(e,t,n){return t||n?b.call(this,e,t,n):b.call(this,e).catch((e=>e))},g.afterEach(((e,t)=>{e.meta.isRecord&&setTimeout((()=>{window.scrollTo(0,e.meta.top)}),0)}));var S=g},239:function(e,t,n){"use strict";var r=n(311),o=n.n(r),i=n(294),a=n.n(i),s=n(212);o().use(a());let u={tokenInfo:{},userInfo:{},userProfile:{}};const c=localStorage.getItem("state");c&&(u=JSON.parse(c)),t["Z"]=new(a().Store)({state:u,getters:{userAvatar(e){let t="https://img.yzcdn.cn/vant/cat.jpeg";return e.userInfo.photo&&(t=e.userInfo.photo),t}},mutations:{updateTokenInfo(e,t){e.tokenInfo=t,console.log(e),this.commit("saveStateToStorage")},saveStateToStorage(e){localStorage.setItem("state",JSON.stringify(e))},updateUserInfo(e,t){e.userInfo=t,this.commit("saveStateToStorage")},cleanState(e){e.tokenInfo={},e.userInfo={},e.userProfile={},this.commit("saveStateToStorage")},updateUserProfile(e,t){e.userProfile=t,this.commit("saveStateToStorage")}},actions:{async initUserInfo(e){const{data:t}=await(0,s.Zf)();"OK"===t.message&&e.commit("updateUserInfo",t.data)},async initUserProfile(e){const{data:t}=await(0,s.TY)();"OK"===t.message&&e.commit("updateUserProfile",t.data)}},modules:{}})},361:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=axios,o=n.n(r),i=n(871),a=n(239),s=n(686);const u=o().create({baseURL:"http://www.liulongbin.top:8000"});u.interceptors.request.use((e=>{const t=a.Z.state.tokenInfo.token;return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(function(e){return Promise.reject(e)})),u.interceptors.response.use((e=>(i.Toast.clear(),e)),(e=>(i.Toast.clear(),e.response&&401===e.response.status&&(console.log("token 过期啦"),a.Z.commit("cleanState"),s.Z.replace("/login?pre="+s.Z.currentRoute.fullPath)),Promise.reject(e))));var c=u},311:function(e){"use strict";e.exports=Vue},294:function(e){"use strict";e.exports=Vuex},219:function(e){"use strict";e.exports=dayjs},253:function(e){"use strict";e.exports=hljs},924:function(e){"use strict";e.exports=io},94:function(e){"use strict";e.exports=popmotion},871:function(e){"use strict";e.exports=vant}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,i){if(!r){var a=1/0;for(f=0;f<e.length;f++){r=e[f][0],o=e[f][1],i=e[f][2];for(var s=!0,u=0;u<r.length;u++)(!1&i||a>=i)&&Object.keys(n.O).every((function(e){return n.O[e](r[u])}))?r.splice(u--,1):(s=!1,i<a&&(a=i));if(s){e.splice(f--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var f=e.length;f>0&&e[f-1][2]>i;f--)e[f]=e[f-1];e[f]=[r,o,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{161:"0395f7be",198:"34d8a11d",245:"bfc01bce",268:"1e632dee",308:"95097b2c",380:"60fa82a7",419:"e1525ee0",893:"800f729e",991:"87c52c45"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{161:"e48b9d76",198:"2ba962de",245:"185bbfc6",268:"b501ee7f",308:"9dca1e82",380:"b3a4e424",419:"23ec1702",893:"91197279"}[e]+".css"}}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vue_toutiao:";n.l=function(r,o,i,a){if(e[r])e[r].push(o);else{var s,u;if(void 0!==i)for(var c=document.getElementsByTagName("script"),f=0;f<c.length;f++){var d=c[f];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(u=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[o];var l=function(t,n){s.onerror=s.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(l.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=l.bind(null,s.onerror),s.onload=l.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p=""}(),function(){var e=function(e,t,n,r){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var i=function(i){if(o.onerror=o.onload=null,"load"===i.type)n();else{var a=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.href||t,u=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");u.code="CSS_CHUNK_LOAD_FAILED",u.type=a,u.request=s,o.parentNode.removeChild(o),r(u)}};return o.onerror=o.onload=i,o.href=t,document.head.appendChild(o),o},t=function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var o=n[r],i=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(i===e||i===t))return o}var a=document.getElementsByTagName("style");for(r=0;r<a.length;r++){o=a[r],i=o.getAttribute("data-href");if(i===e||i===t)return o}},r=function(r){return new Promise((function(o,i){var a=n.miniCssF(r),s=n.p+a;if(t(a,s))return o();e(r,s,o,i)}))},o={143:0};n.f.miniCss=function(e,t){var n={161:1,198:1,245:1,268:1,308:1,380:1,419:1,893:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=r(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}(),function(){var e={143:0,998:0};n.f.j=function(t,r){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else if(998!=t){var i=new Promise((function(n,r){o=e[t]=[n,r]}));r.push(o[2]=i);var a=n.p+n.u(t),s=new Error,u=function(r){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,o[1](s)}};n.l(a,u,"chunk-"+t,t)}else e[t]=0},n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,i,a=r[0],s=r[1],u=r[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(u)var f=u(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(f)},r=self["webpackChunkvue_toutiao"]=self["webpackChunkvue_toutiao"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(416)}));r=n.O(r)})();
//# sourceMappingURL=app.afbf6a22.js.map